#!/bin/bash

if [ $# -lt 1 ]; then
	offset="+0day"
else 
	offset="$1day"
fi

alias odate="date --date $offset"

# path to directory of lists
if ! [ -d "$tdir" ]; then
	tdir="$HOME/Documents/todo-lists"
fi
tpath="$tdir/$(date --date $offset +%Y)/$(date --date $offset +%m)"

# getting path + name of list
filename="$tpath/$(date --date $offset +%F).md"

# update git repo
cd $tdir && git pull

# make directories recursively
mkdir -p $tpath

# checking if file exists
if ! [ -f "$filename" ]; then
	touch $filename
	echo "# To Do List $(date --date $offset +'%A %F')" > $filename
	cat $tdir/header.md >> $filename
fi

# add switch to configure whether git commit & push is done
vim $filename

git add $filename
git commit -m "updated $(date --date $offset +%F).md"
git push
