#!/bin/bash

# path to directory of lists
if ! [ -d "$tdir" ]; then
	tdir="$HOME/Documents/todo-lists"
	tpath="$tdir/$(date +%Y)/$(date +%m)"
fi

# update git repo
cd $tdir && git pull

# make directories recursively
mkdir -p $tpath

# getting path + name of list
if [ $# -lt 1 ]; then
	filename="$tpath/$(date +%F).md"
else
	filename="$tpath/$(date -v $1d +%F).md"
fi

# checking if file exists
if ! [ -f "$filename" ]; then
	touch $filename
	if [ $# -lt 1 ]; then
		echo "# To Do List $(date +'%A %F')" > $filename
	else
		echo "# To Do List $(date -v $1d +'%A %F')" > $filename
	fi
	cat $tdir/header.md >> $filename
fi

echo $filename
vim $filename && git add * && git commit && git push
